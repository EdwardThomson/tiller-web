<script src='https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js'></script>
<script>

$(document).ready(function() {

    var qtyBlack;
    var qtyGrey;
    var qtySilver;
    var qtyOrange;

    updateCheckout();

    $('#black').click(function() {
        if (qtyBlack > 0) {
            setQty('black', 0);
        } else {
            setQty('black', 1);
        }
    });

    $('#grey').click(function() {
        if (qtyGrey > 0) {
            setQty('grey', 0)
        } else {
            setQty('grey', 1)
        }
    });

    $('#silver').click(function() {
        if (qtySilver > 0) {
            setQty('silver', 0);
        } else {
            setQty('silver', 1);
        }
    });

    $('#orange').click(function() {
        if (qtyOrange > 0) {
            setQty('orange', 0);
        } else {
            setQty('orange', 1);
        }
    });

    $('#increment-black').click(function() {incrementQty('black')});
    $('#decrement-black').click(function() {decrementQty('black')});

    $('#increment-grey').click(function() {incrementQty('grey')});
    $('#decrement-grey').click(function() {decrementQty('grey')});

    $('#increment-silver').click(function() {incrementQty('silver')});
    $('#decrement-silver').click(function() {decrementQty('silver')});

    $('#increment-orange').click(function() {incrementQty('orange')});
    $('#decrement-orange').click(function() {decrementQty('orange')});


    function setQty(variant, qty) {
        console.log('setQty', variant, qty)
        Cookies.set('_lrc-qty-' + variant, qty);
        updateCheckout();
    }

    function getQty(variant) {
        var qty = Cookies.get('_lrc-qty-' + variant);
        if (qty === undefined) {
            console.log('getQty undefined', variant);
            return 0;
        }
        console.log('getQty', qty);
        return parseInt(qty, 10);
    }

    function incrementQty(variant) {
        console.log('INCREMENTQTY');
        var qty = getQty(variant);
        qty++;
        setQty(variant, qty);
    }

    function decrementQty(variant) {
        console.log('DECREMENTQTY');
        var qty = getQty(variant);
        if (qty > 0) {
            qty--;
        } else {
            qty = 0;
        }
        setQty(variant, qty);
    }

    function updateCheckout() {

        qtyBlack = getQty('black');
        qtyGrey = getQty('grey');
        qtySilver = getQty('silver');
        qtyOrange = getQty('orange');
        qtyTotal = qtyBlack + qtyGrey + qtySilver + qtyOrange;

        $('#item-qty-black').val(qtyBlack);
        $('#item-qty-grey').val(qtyGrey);
        $('#item-qty-silver').val(qtySilver);
        $('#item-qty-orange').val(qtyOrange);

        if (qtyBlack > 0) {
            $('#item-total-black').text(`$${qtyBlack * 59}`);
            $('#black').prop('checked', true);
        } else {
            $('#item-total-black').text(`0`);
            $('#black').prop('checked', false);
        }

        if (qtyGrey > 0) {
            $('#item-total-grey').text(`$${qtyGrey * 59}`);
            $('#grey').prop('checked', true);
        } else {
            $('#item-total-grey').text(`0`);
            $('#grey').prop('checked', false);
        }

        if (qtySilver > 0) {
            $('#item-total-silver').text(`$${qtySilver * 59}`);
            $('#silver').prop('checked', true);
        } else {
            $('#item-total-silver').text(`0`);
            $('#silver').prop('checked', false);
        }

        if (qtyOrange > 0) {
            $('#item-total-orange').text(`$${qtyOrange * 59}`);
            $('#orange').prop('checked', true);
        } else {
            $('#item-total-orange').text(`0`);
            $('#orange').prop('checked', false);
        }

        if (qtyTotal > 0) {

            $('#plan-total').text(`$${qtyTotal * 72}`);
            $('#plan-qty').text(`${qtyTotal}`);

            $('#total-payable').text(`USD$${qtyTotal * 131}`);

            $('#lrw-id-btn__checkout').removeClass('lrw-c-button--disabled');
            $('#lrw-id-btn__checkout').attr("disabled", false); 

        } else {

            $('#plan-total').text('-');
            $('#plan-qty').text('-');

            $('#total-payable').text('-');

            $('#lrw-id-btn__checkout').addClass('lrw-c-button--disabled');
            $('#lrw-id-btn__checkout').attr("disabled", true); 
        }

    }

});

</script>